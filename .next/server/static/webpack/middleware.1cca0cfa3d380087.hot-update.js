"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/api/api-helper.ts":
/*!*******************************!*\
  !*** ./lib/api/api-helper.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EAPIMethod: () => (/* binding */ EAPIMethod),\n/* harmony export */   RequestHelper: () => (/* binding */ RequestHelper)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(middleware)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(middleware)/./node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../log */ \"(middleware)/./lib/log.ts\");\n\n\n\n\nvar EAPIMethod = /*#__PURE__*/ function(EAPIMethod) {\n    EAPIMethod[\"GET\"] = \"GET\";\n    EAPIMethod[\"POST\"] = \"POST\";\n    EAPIMethod[\"PUT\"] = \"PUT\";\n    EAPIMethod[\"DELETE\"] = \"DELETE\";\n    EAPIMethod[\"PATCH\"] = \"PATCH\";\n    return EAPIMethod;\n}({});\n/**\r\n * Server-side API helper (Next.js Route Handler hoáº·c server component)\r\n */ async function RequestHelper(params) {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = cookieStore.get(\"token\")?.value;\n        const lang = cookieStore.get(\"lang\")?.value || \"en\";\n        const fullUrl = `${process.env.NEXT_SERVER_API || process.env.NEXT_PUBLIC_API_URL}${params.url}`;\n        const config = {\n            method: params.method,\n            url: fullUrl,\n            headers: {\n                Authorization: token ? `Bearer ${token}` : \"\",\n                \"Accept-Language\": lang,\n                ...next_headers__WEBPACK_IMPORTED_MODULE_0__.headers\n            },\n            data: params.data,\n            timeout: 5000\n        };\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(config);\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('api-helper', 'RequestHelper', `URL: ${params.url}; response: ${JSON.stringify(response.data.data)}`);\n        return response.data;\n    } catch (error) {\n        let external_message = \"An unexpected error occurred\";\n        let internal_message = error.message || \"Unknown error\";\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.z.ZodError) {\n            internal_message = error.errors[0]?.message || \"Validation failed\";\n            external_message = \"Invalid data format\";\n        } else if (error.response) {\n            const status = error.response.status;\n            external_message = error.response.data?.meta?.external_message || error.response.data?.message || (status >= 400 && status < 500 ? \"Client error\" : \"Server error\");\n            internal_message = error.response.data?.meta?.internal_message || error.message;\n        }\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('api-helper', 'RequestHelper', `URL: ${params.url} - internal: ${internal_message} - external: ${external_message}`);\n        return {\n            meta: {\n                success: false,\n                internal_message,\n                external_message\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbGliL2FwaS9hcGktaGVscGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNGO0FBQ3hCO0FBQ0M7QUFXbEIsd0NBQUtLOzs7Ozs7V0FBQUE7TUFNWDtBQUVEOztDQUVDLEdBQ00sZUFBZUMsY0FBaUJDLE1BS3RDO0lBRUMsSUFBSTtRQUNGLE1BQU1DLGNBQWMsTUFBTVAscURBQU9BO1FBQ2pDLE1BQU1RLFFBQVFELFlBQVlFLEdBQUcsQ0FBQyxVQUFVQztRQUN4QyxNQUFNQyxPQUFPSixZQUFZRSxHQUFHLENBQUMsU0FBU0MsU0FBUztRQUUvQyxNQUFNRSxVQUFVLEdBQUdDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJRixRQUFRQyxHQUFHLENBQUNFLG1CQUFtQixHQUFHVixPQUFPVyxHQUFHLEVBQUU7UUFFaEcsTUFBTUMsU0FBNkI7WUFDakNDLFFBQVFiLE9BQU9hLE1BQU07WUFDckJGLEtBQUtMO1lBQ0xYLFNBQVM7Z0JBQ1BtQixlQUFlWixRQUFRLENBQUMsT0FBTyxFQUFFQSxPQUFPLEdBQUc7Z0JBQzNDLG1CQUFtQkc7Z0JBQ25CLEdBQUdWLGlEQUFPO1lBQ1o7WUFDQW9CLE1BQU1mLE9BQU9lLElBQUk7WUFDakJDLFNBQVM7UUFDWDtRQUVBLE1BQU1DLFdBQVcsTUFBTXhCLGlEQUFLQSxDQUFpQm1CO1FBRTdDZiw0Q0FBR0EsQ0FBQ3FCLElBQUksQ0FBQyxjQUFjLGlCQUFpQixDQUFDLEtBQUssRUFBRWxCLE9BQU9XLEdBQUcsQ0FBQyxZQUFZLEVBQUVRLEtBQUtDLFNBQVMsQ0FBQ0gsU0FBU0YsSUFBSSxDQUFDQSxJQUFJLEdBQUc7UUFDN0csT0FBT0UsU0FBU0YsSUFBSTtJQUN0QixFQUFFLE9BQU9NLE9BQVk7UUFDbkIsSUFBSUMsbUJBQW1CO1FBQ3ZCLElBQUlDLG1CQUFtQkYsTUFBTUcsT0FBTyxJQUFJO1FBR3hDLElBQUlILGlCQUFpQnpCLDJDQUFVLEVBQUU7WUFDL0IyQixtQkFBbUJGLE1BQU1LLE1BQU0sQ0FBQyxFQUFFLEVBQUVGLFdBQVc7WUFDL0NGLG1CQUFtQjtRQUNyQixPQUFPLElBQUlELE1BQU1KLFFBQVEsRUFBRTtZQUN6QixNQUFNVSxTQUFTTixNQUFNSixRQUFRLENBQUNVLE1BQU07WUFDcENMLG1CQUNFRCxNQUFNSixRQUFRLENBQUNGLElBQUksRUFBRWEsTUFBTU4sb0JBQzNCRCxNQUFNSixRQUFRLENBQUNGLElBQUksRUFBRVMsV0FDcEJHLENBQUFBLFVBQVUsT0FBT0EsU0FBUyxNQUFNLGlCQUFpQixjQUFhO1lBQ2pFSixtQkFDRUYsTUFBTUosUUFBUSxDQUFDRixJQUFJLEVBQUVhLE1BQU1MLG9CQUFvQkYsTUFBTUcsT0FBTztRQUNoRTtRQUVBM0IsNENBQUdBLENBQUN3QixLQUFLLENBQUMsY0FBYyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUVyQixPQUFPVyxHQUFHLENBQUMsYUFBYSxFQUFFWSxpQkFBaUIsYUFBYSxFQUFFRCxrQkFBa0I7UUFDN0gsT0FBTztZQUNMTSxNQUFNO2dCQUNKQyxTQUFTO2dCQUNUTjtnQkFDQUQ7WUFDRjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFBlcnNvbmFsIFByb2plY3RcXFdFQlxcRmluYWNpYWxcXFNlcnZlclxcd2ViLWNsaWVudC1uZXh0anNcXHdlYlxcbGliXFxhcGlcXGFwaS1oZWxwZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zLCB7IEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyBjb29raWVzLCBoZWFkZXJzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xyXG5pbXBvcnQgTG9nIGZyb20gXCIuLi9sb2dcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXBpUmVzcG9uc2U8VD4ge1xyXG4gIG1ldGE6IHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBpbnRlcm5hbF9tZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBleHRlcm5hbF9tZXNzYWdlOiBzdHJpbmc7XHJcbiAgfTtcclxuICBkYXRhPzogVDtcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRUFQSU1ldGhvZCB7XHJcbiAgR0VUID0gXCJHRVRcIixcclxuICBQT1NUID0gXCJQT1NUXCIsXHJcbiAgUFVUID0gXCJQVVRcIixcclxuICBERUxFVEUgPSBcIkRFTEVURVwiLFxyXG4gIFBBVENIID0gXCJQQVRDSFwiLFxyXG59XHJcblxyXG4vKipcclxuICogU2VydmVyLXNpZGUgQVBJIGhlbHBlciAoTmV4dC5qcyBSb3V0ZSBIYW5kbGVyIGhv4bq3YyBzZXJ2ZXIgY29tcG9uZW50KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFJlcXVlc3RIZWxwZXI8VD4ocGFyYW1zOiB7XHJcbiAgbWV0aG9kOiBFQVBJTWV0aG9kLFxyXG4gIHVybDogc3RyaW5nLFxyXG4gIGRhdGE/OiBhbnksXHJcbiAgaGVhZGVycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXHJcbn1cclxuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KFwidG9rZW5cIik/LnZhbHVlO1xyXG4gICAgY29uc3QgbGFuZyA9IGNvb2tpZVN0b3JlLmdldChcImxhbmdcIik/LnZhbHVlIHx8IFwiZW5cIjtcclxuXHJcbiAgICBjb25zdCBmdWxsVXJsID0gYCR7cHJvY2Vzcy5lbnYuTkVYVF9TRVJWRVJfQVBJIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkx9JHtwYXJhbXMudXJsfWA7XHJcblxyXG4gICAgY29uc3QgY29uZmlnOiBBeGlvc1JlcXVlc3RDb25maWcgPSB7XHJcbiAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCxcclxuICAgICAgdXJsOiBmdWxsVXJsLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgQXV0aG9yaXphdGlvbjogdG9rZW4gPyBgQmVhcmVyICR7dG9rZW59YCA6IFwiXCIsXHJcbiAgICAgICAgXCJBY2NlcHQtTGFuZ3VhZ2VcIjogbGFuZyxcclxuICAgICAgICAuLi5oZWFkZXJzLFxyXG4gICAgICB9LFxyXG4gICAgICBkYXRhOiBwYXJhbXMuZGF0YSxcclxuICAgICAgdGltZW91dDogNTAwMCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvczxBcGlSZXNwb25zZTxUPj4oY29uZmlnKTtcclxuXHJcbiAgICBMb2cuaW5mbygnYXBpLWhlbHBlcicsICdSZXF1ZXN0SGVscGVyJywgYFVSTDogJHtwYXJhbXMudXJsfTsgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5kYXRhKX1gKVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgbGV0IGV4dGVybmFsX21lc3NhZ2UgPSBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWRcIjtcclxuICAgIGxldCBpbnRlcm5hbF9tZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBcIlVua25vd24gZXJyb3JcIjtcclxuXHJcblxyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xyXG4gICAgICBpbnRlcm5hbF9tZXNzYWdlID0gZXJyb3IuZXJyb3JzWzBdPy5tZXNzYWdlIHx8IFwiVmFsaWRhdGlvbiBmYWlsZWRcIjtcclxuICAgICAgZXh0ZXJuYWxfbWVzc2FnZSA9IFwiSW52YWxpZCBkYXRhIGZvcm1hdFwiO1xyXG4gICAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZSkge1xyXG4gICAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5yZXNwb25zZS5zdGF0dXM7XHJcbiAgICAgIGV4dGVybmFsX21lc3NhZ2UgPVxyXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGE/Lm1ldGE/LmV4dGVybmFsX21lc3NhZ2UgfHxcclxuICAgICAgICBlcnJvci5yZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8XHJcbiAgICAgICAgKHN0YXR1cyA+PSA0MDAgJiYgc3RhdHVzIDwgNTAwID8gXCJDbGllbnQgZXJyb3JcIiA6IFwiU2VydmVyIGVycm9yXCIpO1xyXG4gICAgICBpbnRlcm5hbF9tZXNzYWdlID1cclxuICAgICAgICBlcnJvci5yZXNwb25zZS5kYXRhPy5tZXRhPy5pbnRlcm5hbF9tZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgTG9nLmVycm9yKCdhcGktaGVscGVyJywgJ1JlcXVlc3RIZWxwZXInLCBgVVJMOiAke3BhcmFtcy51cmx9IC0gaW50ZXJuYWw6ICR7aW50ZXJuYWxfbWVzc2FnZX0gLSBleHRlcm5hbDogJHtleHRlcm5hbF9tZXNzYWdlfWApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWV0YToge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGludGVybmFsX21lc3NhZ2UsXHJcbiAgICAgICAgZXh0ZXJuYWxfbWVzc2FnZSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJheGlvcyIsImNvb2tpZXMiLCJoZWFkZXJzIiwieiIsIkxvZyIsIkVBUElNZXRob2QiLCJSZXF1ZXN0SGVscGVyIiwicGFyYW1zIiwiY29va2llU3RvcmUiLCJ0b2tlbiIsImdldCIsInZhbHVlIiwibGFuZyIsImZ1bGxVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9TRVJWRVJfQVBJIiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInVybCIsImNvbmZpZyIsIm1ldGhvZCIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwidGltZW91dCIsInJlc3BvbnNlIiwiaW5mbyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsImV4dGVybmFsX21lc3NhZ2UiLCJpbnRlcm5hbF9tZXNzYWdlIiwibWVzc2FnZSIsIlpvZEVycm9yIiwiZXJyb3JzIiwic3RhdHVzIiwibWV0YSIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./lib/api/api-helper.ts\n");

/***/ })

});