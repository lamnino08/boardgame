"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/api/api-helper.ts":
/*!*******************************!*\
  !*** ./lib/api/api-helper.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EAPIMethod: () => (/* binding */ EAPIMethod),\n/* harmony export */   RequestHelper: () => (/* binding */ RequestHelper)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(middleware)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(middleware)/./node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../log */ \"(middleware)/./lib/log.ts\");\n\n\n\n\nvar EAPIMethod = /*#__PURE__*/ function(EAPIMethod) {\n    EAPIMethod[\"GET\"] = \"GET\";\n    EAPIMethod[\"POST\"] = \"POST\";\n    EAPIMethod[\"PUT\"] = \"PUT\";\n    EAPIMethod[\"DELETE\"] = \"DELETE\";\n    EAPIMethod[\"PATCH\"] = \"PATCH\";\n    return EAPIMethod;\n}({});\n/**\r\n * Server-side API helper (Next.js Route Handler hoáº·c server component)\r\n */ async function RequestHelper(params) {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = cookieStore.get(\"token\")?.value;\n        const lang = cookieStore.get(\"lang\")?.value || \"en\";\n        const fullUrl = `${process.env.NEXT_SERVER_API || process.env.NEXT_PUBLIC_API_URL}${params.url}`;\n        const config = {\n            method: params.method,\n            url: fullUrl,\n            headers: {\n                Authorization: token ? `Bearer ${token}` : \"\",\n                \"Accept-Language\": lang,\n                ...next_headers__WEBPACK_IMPORTED_MODULE_0__.headers\n            },\n            data: params.data,\n            timeout: 5000\n        };\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('api-helper', 'RequestHelper', `URL: ${params.url}; data: ${JSON.stringify(params.data)}`);\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(config);\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('api-helper', 'RequestHelper', `URL: ${params.url}; response: ${JSON.stringify(response.data.data)} `);\n        return response.data;\n    } catch (error) {\n        let external_message = \"An unexpected error occurred\";\n        let internal_message = error.message || \"Unknown error\";\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.z.ZodError) {\n            internal_message = error.errors[0]?.message || \"Validation failed\";\n            external_message = \"Invalid data format\";\n        } else if (error.response) {\n            const status = error.response.status;\n            external_message = error.response.data?.meta?.external_message || error.response.data?.message || (status >= 400 && status < 500 ? \"Client error\" : \"Server error\");\n            internal_message = error.response.data?.meta?.internal_message || error.message;\n        }\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('api-helper', 'RequestHelper', `URL: ${params.url} - internal: ${internal_message} - external: ${external_message} `);\n        return {\n            meta: {\n                success: false,\n                internal_message,\n                external_message\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbGliL2FwaS9hcGktaGVscGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNGO0FBQ3hCO0FBQ0M7QUFXbEIsd0NBQUtLOzs7Ozs7V0FBQUE7TUFNWDtBQUVEOztDQUVDLEdBQ00sZUFBZUMsY0FBaUJDLE1BS3RDO0lBRUMsSUFBSTtRQUNGLE1BQU1DLGNBQWMsTUFBTVAscURBQU9BO1FBQ2pDLE1BQU1RLFFBQVFELFlBQVlFLEdBQUcsQ0FBQyxVQUFVQztRQUN4QyxNQUFNQyxPQUFPSixZQUFZRSxHQUFHLENBQUMsU0FBU0MsU0FBUztRQUUvQyxNQUFNRSxVQUFVLEdBQUdDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJRixRQUFRQyxHQUFHLENBQUNFLG1CQUFtQixHQUFHVixPQUFPVyxHQUFHLEVBQUU7UUFFaEcsTUFBTUMsU0FBNkI7WUFDakNDLFFBQVFiLE9BQU9hLE1BQU07WUFDckJGLEtBQUtMO1lBQ0xYLFNBQVM7Z0JBQ1BtQixlQUFlWixRQUFRLENBQUMsT0FBTyxFQUFFQSxPQUFPLEdBQUc7Z0JBQzNDLG1CQUFtQkc7Z0JBQ25CLEdBQUdWLGlEQUFPO1lBQ1o7WUFDQW9CLE1BQU1mLE9BQU9lLElBQUk7WUFDakJDLFNBQVM7UUFDWDtRQUNBbkIsNENBQUdBLENBQUNvQixJQUFJLENBQUMsY0FBYyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUVqQixPQUFPVyxHQUFHLENBQUMsUUFBUSxFQUFFTyxLQUFLQyxTQUFTLENBQUNuQixPQUFPZSxJQUFJLEdBQUc7UUFDbEcsTUFBTUssV0FBVyxNQUFNM0IsaURBQUtBLENBQWlCbUI7UUFFN0NmLDRDQUFHQSxDQUFDb0IsSUFBSSxDQUFDLGNBQWMsaUJBQWlCLENBQUMsS0FBSyxFQUFHakIsT0FBT1csR0FBRyxDQUFFLFlBQVksRUFBR08sS0FBS0MsU0FBUyxDQUFDQyxTQUFTTCxJQUFJLENBQUNBLElBQUksRUFBRyxDQUFDLENBQUM7UUFDbEgsT0FBT0ssU0FBU0wsSUFBSTtJQUN0QixFQUFFLE9BQU9NLE9BQVk7UUFDbkIsSUFBSUMsbUJBQW1CO1FBQ3ZCLElBQUlDLG1CQUFtQkYsTUFBTUcsT0FBTyxJQUFJO1FBR3hDLElBQUlILGlCQUFpQnpCLDJDQUFVLEVBQUU7WUFDL0IyQixtQkFBbUJGLE1BQU1LLE1BQU0sQ0FBQyxFQUFFLEVBQUVGLFdBQVc7WUFDL0NGLG1CQUFtQjtRQUNyQixPQUFPLElBQUlELE1BQU1ELFFBQVEsRUFBRTtZQUN6QixNQUFNTyxTQUFTTixNQUFNRCxRQUFRLENBQUNPLE1BQU07WUFDcENMLG1CQUNFRCxNQUFNRCxRQUFRLENBQUNMLElBQUksRUFBRWEsTUFBTU4sb0JBQzNCRCxNQUFNRCxRQUFRLENBQUNMLElBQUksRUFBRVMsV0FDcEJHLENBQUFBLFVBQVUsT0FBT0EsU0FBUyxNQUFNLGlCQUFpQixjQUFhO1lBQ2pFSixtQkFDRUYsTUFBTUQsUUFBUSxDQUFDTCxJQUFJLEVBQUVhLE1BQU1MLG9CQUFvQkYsTUFBTUcsT0FBTztRQUNoRTtRQUVBM0IsNENBQUdBLENBQUN3QixLQUFLLENBQUMsY0FBYyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUdyQixPQUFPVyxHQUFHLENBQUUsYUFBYSxFQUFHWSxpQkFBa0IsYUFBYSxFQUFHRCxpQkFBa0IsQ0FBQyxDQUFDO1FBQ3BJLE9BQU87WUFDTE0sTUFBTTtnQkFDSkMsU0FBUztnQkFDVE47Z0JBQ0FEO1lBQ0Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxQZXJzb25hbCBQcm9qZWN0XFxXRUJcXEZpbmFjaWFsXFxTZXJ2ZXJcXHdlYi1jbGllbnQtbmV4dGpzXFx3ZWJcXGxpYlxcYXBpXFxhcGktaGVscGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcywgeyBBeGlvc1JlcXVlc3RDb25maWcgfSBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgY29va2llcywgaGVhZGVycyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcclxuaW1wb3J0IExvZyBmcm9tIFwiLi4vbG9nXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFwaVJlc3BvbnNlPFQ+IHtcclxuICBtZXRhOiB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgaW50ZXJuYWxfbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZXh0ZXJuYWxfbWVzc2FnZTogc3RyaW5nO1xyXG4gIH07XHJcbiAgZGF0YT86IFQ7XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEVBUElNZXRob2Qge1xyXG4gIEdFVCA9IFwiR0VUXCIsXHJcbiAgUE9TVCA9IFwiUE9TVFwiLFxyXG4gIFBVVCA9IFwiUFVUXCIsXHJcbiAgREVMRVRFID0gXCJERUxFVEVcIixcclxuICBQQVRDSCA9IFwiUEFUQ0hcIixcclxufVxyXG5cclxuLyoqXHJcbiAqIFNlcnZlci1zaWRlIEFQSSBoZWxwZXIgKE5leHQuanMgUm91dGUgSGFuZGxlciBob+G6t2Mgc2VydmVyIGNvbXBvbmVudClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBSZXF1ZXN0SGVscGVyPFQ+KHBhcmFtczoge1xyXG4gIG1ldGhvZDogRUFQSU1ldGhvZCxcclxuICB1cmw6IHN0cmluZyxcclxuICBkYXRhPzogYW55LFxyXG4gIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxyXG59XHJcbik6IFByb21pc2U8QXBpUmVzcG9uc2U8VD4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldChcInRva2VuXCIpPy52YWx1ZTtcclxuICAgIGNvbnN0IGxhbmcgPSBjb29raWVTdG9yZS5nZXQoXCJsYW5nXCIpPy52YWx1ZSB8fCBcImVuXCI7XHJcblxyXG4gICAgY29uc3QgZnVsbFVybCA9IGAke3Byb2Nlc3MuZW52Lk5FWFRfU0VSVkVSX0FQSSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMfSR7cGFyYW1zLnVybH1gO1xyXG5cclxuICAgIGNvbnN0IGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnID0ge1xyXG4gICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsXHJcbiAgICAgIHVybDogZnVsbFVybCxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEF1dGhvcml6YXRpb246IHRva2VuID8gYEJlYXJlciAke3Rva2VufWAgOiBcIlwiLFxyXG4gICAgICAgIFwiQWNjZXB0LUxhbmd1YWdlXCI6IGxhbmcsXHJcbiAgICAgICAgLi4uaGVhZGVycyxcclxuICAgICAgfSxcclxuICAgICAgZGF0YTogcGFyYW1zLmRhdGEsXHJcbiAgICAgIHRpbWVvdXQ6IDUwMDAsXHJcbiAgICB9O1xyXG4gICAgTG9nLmluZm8oJ2FwaS1oZWxwZXInLCAnUmVxdWVzdEhlbHBlcicsIGBVUkw6ICR7cGFyYW1zLnVybH07IGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocGFyYW1zLmRhdGEpfWApO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvczxBcGlSZXNwb25zZTxUPj4oY29uZmlnKTtcclxuXHJcbiAgICBMb2cuaW5mbygnYXBpLWhlbHBlcicsICdSZXF1ZXN0SGVscGVyJywgYFVSTDogJHsgcGFyYW1zLnVybCB9OyByZXNwb25zZTogJHsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5kYXRhKSB9IGApXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBsZXQgZXh0ZXJuYWxfbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xyXG4gICAgbGV0IGludGVybmFsX21lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwiO1xyXG5cclxuXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XHJcbiAgICAgIGludGVybmFsX21lc3NhZ2UgPSBlcnJvci5lcnJvcnNbMF0/Lm1lc3NhZ2UgfHwgXCJWYWxpZGF0aW9uIGZhaWxlZFwiO1xyXG4gICAgICBleHRlcm5hbF9tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGEgZm9ybWF0XCI7XHJcbiAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlKSB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cztcclxuICAgICAgZXh0ZXJuYWxfbWVzc2FnZSA9XHJcbiAgICAgICAgZXJyb3IucmVzcG9uc2UuZGF0YT8ubWV0YT8uZXh0ZXJuYWxfbWVzc2FnZSB8fFxyXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGE/Lm1lc3NhZ2UgfHxcclxuICAgICAgICAoc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA1MDAgPyBcIkNsaWVudCBlcnJvclwiIDogXCJTZXJ2ZXIgZXJyb3JcIik7XHJcbiAgICAgIGludGVybmFsX21lc3NhZ2UgPVxyXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGE/Lm1ldGE/LmludGVybmFsX21lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBMb2cuZXJyb3IoJ2FwaS1oZWxwZXInLCAnUmVxdWVzdEhlbHBlcicsIGBVUkw6ICR7IHBhcmFtcy51cmwgfSAtIGludGVybmFsOiAkeyBpbnRlcm5hbF9tZXNzYWdlIH0gLSBleHRlcm5hbDogJHsgZXh0ZXJuYWxfbWVzc2FnZSB9IGApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWV0YToge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGludGVybmFsX21lc3NhZ2UsXHJcbiAgICAgICAgZXh0ZXJuYWxfbWVzc2FnZSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJheGlvcyIsImNvb2tpZXMiLCJoZWFkZXJzIiwieiIsIkxvZyIsIkVBUElNZXRob2QiLCJSZXF1ZXN0SGVscGVyIiwicGFyYW1zIiwiY29va2llU3RvcmUiLCJ0b2tlbiIsImdldCIsInZhbHVlIiwibGFuZyIsImZ1bGxVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9TRVJWRVJfQVBJIiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInVybCIsImNvbmZpZyIsIm1ldGhvZCIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwidGltZW91dCIsImluZm8iLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2UiLCJlcnJvciIsImV4dGVybmFsX21lc3NhZ2UiLCJpbnRlcm5hbF9tZXNzYWdlIiwibWVzc2FnZSIsIlpvZEVycm9yIiwiZXJyb3JzIiwic3RhdHVzIiwibWV0YSIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./lib/api/api-helper.ts\n");

/***/ })

});