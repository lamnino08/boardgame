"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/api/api-helper.ts":
/*!*******************************!*\
  !*** ./lib/api/api-helper.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EAPIMethod: () => (/* binding */ EAPIMethod),\n/* harmony export */   RequestHelper: () => (/* binding */ RequestHelper)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(middleware)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(middleware)/./node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../log */ \"(middleware)/./lib/log.ts\");\n\n\n\n\nvar EAPIMethod = /*#__PURE__*/ function(EAPIMethod) {\n    EAPIMethod[\"GET\"] = \"GET\";\n    EAPIMethod[\"POST\"] = \"POST\";\n    EAPIMethod[\"PUT\"] = \"PUT\";\n    EAPIMethod[\"DELETE\"] = \"DELETE\";\n    EAPIMethod[\"PATCH\"] = \"PATCH\";\n    return EAPIMethod;\n}({});\n/**\r\n * Server-side API helper (Next.js Route Handler hoáº·c server component)\r\n */ async function RequestHelper(params) {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = cookieStore.get(\"token\")?.value;\n        const lang = cookieStore.get(\"lang\")?.value || \"en\";\n        const fullUrl = `${process.env.NEXT_SERVER_API || process.env.NEXT_PUBLIC_API_URL}${params.url}`;\n        const config = {\n            method: params.method,\n            url: fullUrl,\n            headers: {\n                Authorization: token ? `Bearer ${token}` : \"\",\n                \"Accept-Language\": lang,\n                ...next_headers__WEBPACK_IMPORTED_MODULE_0__.headers\n            },\n            data: params.data,\n            timeout: 5000\n        };\n        // Log trÆ°á»›c khi gá»­i request\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('api-helper', 'RequestHelper', `REQUEST ${params.method} ${params.url}; data: ${JSON.stringify(params.data)}`);\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(config);\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('api-helper', 'RequestHelper', `URL: ${params.url}; response: ${JSON.stringify(response.data.data)} `);\n        return response.data;\n    } catch (error) {\n        let external_message = \"An unexpected error occurred\";\n        let internal_message = error.message || \"Unknown error\";\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.z.ZodError) {\n            internal_message = error.errors[0]?.message || \"Validation failed\";\n            external_message = \"Invalid data format\";\n        } else if (error.response) {\n            const status = error.response.status;\n            external_message = error.response.data?.meta?.external_message || error.response.data?.message || (status >= 400 && status < 500 ? \"Client error\" : \"Server error\");\n            internal_message = error.response.data?.meta?.internal_message || error.message;\n        }\n        _log__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('api-helper', 'RequestHelper', `URL: ${params.url} - internal: ${internal_message} - external: ${external_message} `);\n        return {\n            meta: {\n                success: false,\n                internal_message,\n                external_message\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbGliL2FwaS9hcGktaGVscGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNGO0FBQ3hCO0FBQ0M7QUFXbEIsd0NBQUtLOzs7Ozs7V0FBQUE7TUFNWDtBQUVEOztDQUVDLEdBQ00sZUFBZUMsY0FBaUJDLE1BS3RDO0lBRUMsSUFBSTtRQUNGLE1BQU1DLGNBQWMsTUFBTVAscURBQU9BO1FBQ2pDLE1BQU1RLFFBQVFELFlBQVlFLEdBQUcsQ0FBQyxVQUFVQztRQUN4QyxNQUFNQyxPQUFPSixZQUFZRSxHQUFHLENBQUMsU0FBU0MsU0FBUztRQUUvQyxNQUFNRSxVQUFVLEdBQUdDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJRixRQUFRQyxHQUFHLENBQUNFLG1CQUFtQixHQUFHVixPQUFPVyxHQUFHLEVBQUU7UUFFaEcsTUFBTUMsU0FBNkI7WUFDakNDLFFBQVFiLE9BQU9hLE1BQU07WUFDckJGLEtBQUtMO1lBQ0xYLFNBQVM7Z0JBQ1BtQixlQUFlWixRQUFRLENBQUMsT0FBTyxFQUFFQSxPQUFPLEdBQUc7Z0JBQzNDLG1CQUFtQkc7Z0JBQ25CLEdBQUdWLGlEQUFPO1lBQ1o7WUFDQW9CLE1BQU1mLE9BQU9lLElBQUk7WUFDakJDLFNBQVM7UUFDWDtRQUVBLDRCQUE0QjtRQUM1Qm5CLDRDQUFHQSxDQUFDb0IsSUFBSSxDQUFDLGNBQWMsaUJBQWlCLENBQUMsUUFBUSxFQUFFakIsT0FBT2EsTUFBTSxDQUFDLENBQUMsRUFBRWIsT0FBT1csR0FBRyxDQUFDLFFBQVEsRUFBRU8sS0FBS0MsU0FBUyxDQUFDbkIsT0FBT2UsSUFBSSxHQUFHO1FBRXRILE1BQU1LLFdBQVcsTUFBTTNCLGlEQUFLQSxDQUFpQm1CO1FBRTdDZiw0Q0FBR0EsQ0FBQ29CLElBQUksQ0FBQyxjQUFjLGlCQUFpQixDQUFDLEtBQUssRUFBR2pCLE9BQU9XLEdBQUcsQ0FBRSxZQUFZLEVBQUdPLEtBQUtDLFNBQVMsQ0FBQ0MsU0FBU0wsSUFBSSxDQUFDQSxJQUFJLEVBQUcsQ0FBQyxDQUFDO1FBQ2xILE9BQU9LLFNBQVNMLElBQUk7SUFDdEIsRUFBRSxPQUFPTSxPQUFZO1FBQ25CLElBQUlDLG1CQUFtQjtRQUN2QixJQUFJQyxtQkFBbUJGLE1BQU1HLE9BQU8sSUFBSTtRQUd4QyxJQUFJSCxpQkFBaUJ6QiwyQ0FBVSxFQUFFO1lBQy9CMkIsbUJBQW1CRixNQUFNSyxNQUFNLENBQUMsRUFBRSxFQUFFRixXQUFXO1lBQy9DRixtQkFBbUI7UUFDckIsT0FBTyxJQUFJRCxNQUFNRCxRQUFRLEVBQUU7WUFDekIsTUFBTU8sU0FBU04sTUFBTUQsUUFBUSxDQUFDTyxNQUFNO1lBQ3BDTCxtQkFDRUQsTUFBTUQsUUFBUSxDQUFDTCxJQUFJLEVBQUVhLE1BQU1OLG9CQUMzQkQsTUFBTUQsUUFBUSxDQUFDTCxJQUFJLEVBQUVTLFdBQ3BCRyxDQUFBQSxVQUFVLE9BQU9BLFNBQVMsTUFBTSxpQkFBaUIsY0FBYTtZQUNqRUosbUJBQ0VGLE1BQU1ELFFBQVEsQ0FBQ0wsSUFBSSxFQUFFYSxNQUFNTCxvQkFBb0JGLE1BQU1HLE9BQU87UUFDaEU7UUFFQTNCLDRDQUFHQSxDQUFDd0IsS0FBSyxDQUFDLGNBQWMsaUJBQWlCLENBQUMsS0FBSyxFQUFHckIsT0FBT1csR0FBRyxDQUFFLGFBQWEsRUFBR1ksaUJBQWtCLGFBQWEsRUFBR0QsaUJBQWtCLENBQUMsQ0FBQztRQUNwSSxPQUFPO1lBQ0xNLE1BQU07Z0JBQ0pDLFNBQVM7Z0JBQ1ROO2dCQUNBRDtZQUNGO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJEOlxcUGVyc29uYWwgUHJvamVjdFxcV0VCXFxGaW5hY2lhbFxcU2VydmVyXFx3ZWItY2xpZW50LW5leHRqc1xcd2ViXFxsaWJcXGFwaVxcYXBpLWhlbHBlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MsIHsgQXhpb3NSZXF1ZXN0Q29uZmlnIH0gZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IGNvb2tpZXMsIGhlYWRlcnMgfSBmcm9tIFwibmV4dC9oZWFkZXJzXCI7XHJcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XHJcbmltcG9ydCBMb2cgZnJvbSBcIi4uL2xvZ1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlSZXNwb25zZTxUPiB7XHJcbiAgbWV0YToge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIGludGVybmFsX21lc3NhZ2U6IHN0cmluZztcclxuICAgIGV4dGVybmFsX21lc3NhZ2U6IHN0cmluZztcclxuICB9O1xyXG4gIGRhdGE/OiBUO1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBFQVBJTWV0aG9kIHtcclxuICBHRVQgPSBcIkdFVFwiLFxyXG4gIFBPU1QgPSBcIlBPU1RcIixcclxuICBQVVQgPSBcIlBVVFwiLFxyXG4gIERFTEVURSA9IFwiREVMRVRFXCIsXHJcbiAgUEFUQ0ggPSBcIlBBVENIXCIsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXItc2lkZSBBUEkgaGVscGVyIChOZXh0LmpzIFJvdXRlIEhhbmRsZXIgaG/hurdjIHNlcnZlciBjb21wb25lbnQpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUmVxdWVzdEhlbHBlcjxUPihwYXJhbXM6IHtcclxuICBtZXRob2Q6IEVBUElNZXRob2QsXHJcbiAgdXJsOiBzdHJpbmcsXHJcbiAgZGF0YT86IGFueSxcclxuICBoZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxufVxyXG4pOiBQcm9taXNlPEFwaVJlc3BvbnNlPFQ+PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xyXG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoXCJ0b2tlblwiKT8udmFsdWU7XHJcbiAgICBjb25zdCBsYW5nID0gY29va2llU3RvcmUuZ2V0KFwibGFuZ1wiKT8udmFsdWUgfHwgXCJlblwiO1xyXG5cclxuICAgIGNvbnN0IGZ1bGxVcmwgPSBgJHtwcm9jZXNzLmVudi5ORVhUX1NFUlZFUl9BUEkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTH0ke3BhcmFtcy51cmx9YDtcclxuXHJcbiAgICBjb25zdCBjb25maWc6IEF4aW9zUmVxdWVzdENvbmZpZyA9IHtcclxuICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLFxyXG4gICAgICB1cmw6IGZ1bGxVcmwsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBBdXRob3JpemF0aW9uOiB0b2tlbiA/IGBCZWFyZXIgJHt0b2tlbn1gIDogXCJcIixcclxuICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBsYW5nLFxyXG4gICAgICAgIC4uLmhlYWRlcnMsXHJcbiAgICAgIH0sXHJcbiAgICAgIGRhdGE6IHBhcmFtcy5kYXRhLFxyXG4gICAgICB0aW1lb3V0OiA1MDAwLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBMb2cgdHLGsOG7m2Mga2hpIGfhu61pIHJlcXVlc3RcclxuICAgIExvZy5pbmZvKCdhcGktaGVscGVyJywgJ1JlcXVlc3RIZWxwZXInLCBgUkVRVUVTVCAke3BhcmFtcy5tZXRob2R9ICR7cGFyYW1zLnVybH07IGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocGFyYW1zLmRhdGEpfWApXHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvczxBcGlSZXNwb25zZTxUPj4oY29uZmlnKTtcclxuXHJcbiAgICBMb2cuaW5mbygnYXBpLWhlbHBlcicsICdSZXF1ZXN0SGVscGVyJywgYFVSTDogJHsgcGFyYW1zLnVybCB9OyByZXNwb25zZTogJHsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5kYXRhKSB9IGApXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBsZXQgZXh0ZXJuYWxfbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xyXG4gICAgbGV0IGludGVybmFsX21lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwiO1xyXG5cclxuXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XHJcbiAgICAgIGludGVybmFsX21lc3NhZ2UgPSBlcnJvci5lcnJvcnNbMF0/Lm1lc3NhZ2UgfHwgXCJWYWxpZGF0aW9uIGZhaWxlZFwiO1xyXG4gICAgICBleHRlcm5hbF9tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGEgZm9ybWF0XCI7XHJcbiAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlKSB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cztcclxuICAgICAgZXh0ZXJuYWxfbWVzc2FnZSA9XHJcbiAgICAgICAgZXJyb3IucmVzcG9uc2UuZGF0YT8ubWV0YT8uZXh0ZXJuYWxfbWVzc2FnZSB8fFxyXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGE/Lm1lc3NhZ2UgfHxcclxuICAgICAgICAoc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA1MDAgPyBcIkNsaWVudCBlcnJvclwiIDogXCJTZXJ2ZXIgZXJyb3JcIik7XHJcbiAgICAgIGludGVybmFsX21lc3NhZ2UgPVxyXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGE/Lm1ldGE/LmludGVybmFsX21lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBMb2cuZXJyb3IoJ2FwaS1oZWxwZXInLCAnUmVxdWVzdEhlbHBlcicsIGBVUkw6ICR7IHBhcmFtcy51cmwgfSAtIGludGVybmFsOiAkeyBpbnRlcm5hbF9tZXNzYWdlIH0gLSBleHRlcm5hbDogJHsgZXh0ZXJuYWxfbWVzc2FnZSB9IGApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWV0YToge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGludGVybmFsX21lc3NhZ2UsXHJcbiAgICAgICAgZXh0ZXJuYWxfbWVzc2FnZSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJheGlvcyIsImNvb2tpZXMiLCJoZWFkZXJzIiwieiIsIkxvZyIsIkVBUElNZXRob2QiLCJSZXF1ZXN0SGVscGVyIiwicGFyYW1zIiwiY29va2llU3RvcmUiLCJ0b2tlbiIsImdldCIsInZhbHVlIiwibGFuZyIsImZ1bGxVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9TRVJWRVJfQVBJIiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInVybCIsImNvbmZpZyIsIm1ldGhvZCIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwidGltZW91dCIsImluZm8iLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2UiLCJlcnJvciIsImV4dGVybmFsX21lc3NhZ2UiLCJpbnRlcm5hbF9tZXNzYWdlIiwibWVzc2FnZSIsIlpvZEVycm9yIiwiZXJyb3JzIiwic3RhdHVzIiwibWV0YSIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./lib/api/api-helper.ts\n");

/***/ })

});